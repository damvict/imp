{% extends "base.html" %}
{% load static %}
{% block title %}Bank Manager Dashboard{% endblock %}

{% block content %}

<style>
/* ---------- Page ---------- */
body {
  background-color: #F9FAFB;
}

/* ---------- Welcome ---------- */
.welcome-box {
  background-color: #E0E7FF;
  margin: 16px;
  border-radius: 12px;
  padding: 16px;
}

.welcome-text {
  font-size: 16px;
  color: #1E3A8A;
}

.user-role {
  font-size: 20px;
  font-weight: 700;
  color: #1E3A8A;
}

.sub-text {
  margin-top: 6px;
  color: #374151;
}

/* ---------- Section ---------- */
.section-title {
  font-size: 18px;
  font-weight: 700;
  margin: 16px;
  color: #1E3A8A;
}

/* ---------- Quick Actions ---------- */
.quick-actions {
  display: flex;
  gap: 20px;
  margin: 0 16px 20px;
  flex-wrap: wrap;
}

.action-card {
  background-color: #fff;
  border-radius: 14px;
  padding: 20px;
  width: 160px;
  text-align: center;
  position: relative;
  box-shadow: 0 4px 8px rgba(0,0,0,0.08);
  cursor: pointer;
  transition: transform 0.2s ease;
}

.action-card:hover {
  transform: translateY(-4px);
}

/* Alert */
.alert-card {
  border: 1px solid #FCA5A5;
  background-color: #FEF2F2;
}

.action-icon {
  font-size: 26px;
  color: #3B82F6;
}

.alert-card .action-icon {
  color: #DC2626;
}

.action-text {
  margin-top: 8px;
  font-weight: 600;
  font-size: 14px;
  color: #1F2937;
}

.alert-card .action-text {
  color: #DC2626;
  font-weight: 700;
}

.sub-alert {
  font-size: 11px;
  color: #B91C1C;
  margin-top: 4px;
}

/* Badge */
.badge {
  position: absolute;
  top: 8px;
  right: 10px;
  background-color: #DC2626;
  color: white;
  border-radius: 12px;
  min-width: 22px;
  height: 22px;
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 12px;
  font-weight: 700;
}
</style>

<!-- ---------- WELCOME ---------- -->
<div class="welcome-box">
  <div class="welcome-text">Welcome,</div>
  <div class="user-role">Bank Manager</div>
  <div class="sub-text">Manage payments and approvals</div>
</div>

<!-- ---------- QUICK ACTIONS ---------- -->
<div class="section-title">Quick Actions</div>


<div class="quick-actions">

  <!-- Initiate Payment -->
  <a href="{% url 'bank_manager_view' %}" style="text-decoration:none;">
    <div class="action-card {% if bm.init_payment > 0 %}alert-card{% endif %}">

      {% if bm.init_payment > 0 %}
        <div class="badge">{{ bm.init_payment }}</div>
      {% endif %}

      <div class="action-icon">ðŸ’³</div>
      <div class="action-text">Initiate Payment</div>

      {% if bm.init_payment > 0 %}
        <div class="sub-alert">Payment(s) pending</div>
      {% endif %}

    </div>
  </a>

  <!-- Upload Payment Reference -->
  <a href="{% url 'bank-manager-payment-references' %}"
     class="action-card {% if bm.upload_payment > 0 %}alert-card{% endif %}"
     style="text-decoration:none; color:inherit;">

    {% if bm.upload_payment > 0 %}
      <div class="badge">{{ bm.upload_payment }}</div>
    {% endif %}

    <div class="action-icon">ðŸ“„</div>
    <div class="action-text">Upload Payment Ref</div>

    {% if bm.upload_payment > 0 %}
      <div class="sub-alert">Reference(s) pending</div>
    {% endif %}

  </a>

</div>
<script>
  setTimeout(function () {
    window.location.reload();
  }, 60000); // 60 seconds
</script>

{% endblock %}
